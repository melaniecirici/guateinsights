import zipfile
from pathlib import Path

# Crear estructura para todo el sitio web completo con visualizaciones integradas
complete_site_path = Path("/mnt/data/GuateInsights_Site_Complete")
complete_site_path.mkdir(parents=True, exist_ok=True)

# Copiar el CSV generado
data_dir = complete_site_path / "data"
data_dir.mkdir(parents=True, exist_ok=True)
(df_exportaciones.to_csv(data_dir / "exportaciones_2024.csv", index=False))

# Crear una versión simple del resto de las páginas con espacios para visualizar datos
page_titles = {
    "index.html": "Inicio",
    "exportaciones.html": "Exportaciones",
    "importaciones.html": "Importaciones",
    "clima.html": "Clima",
    "riesgo.html": "Riesgos",
    "salud.html": "Salud",
    "educacion.html": "Educación",
    "empleo.html": "Empleo",
    "tecnologia.html": "Tecnología",
    "transporte.html": "Transporte",
    "contacto.html": "Contacto"
}

# Navegación común
nav = ''.join([f'<a href="{fname}">{title}</a>' for fname, title in page_titles.items()])

# Exportaciones (con gráfico integrado)
exportaciones_html = (complete_site_path / "exportaciones.html")
exportaciones_html.write_text(html_exportaciones_content, encoding="utf-8")

# Crear las otras páginas base
for fname, title in page_titles.items():
    path = complete_site_path / fname
    if fname != "exportaciones.html":
        content = f"""<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{title} - GuateInsights</title>
  <style>
    body {{ font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f7f9fc; }}
    header {{ background-color: #024873; color: white; padding: 20px; text-align: center; }}
    nav {{ background-color: #03619c; padding: 10px; text-align: center; }}
    nav a {{ color: white; text-decoration: none; margin: 0 10px; font-weight: bold; }}
    nav a:hover {{ text-decoration: underline; }}
    section {{ padding: 40px; }}
    h2 {{ color: #024873; }}
  </style>
</head>
<body>
  <header><h1>GuateInsights</h1><p>Inteligencia de Datos Públicos de Guatemala</p></header>
  <nav>{nav}</nav>
  <section>
    <h2>{title}</h2>
    <p>Próximamente visualizaciones y datos reales de esta categoría.</p>
  </section>
</body>
</html>"""
        path.write_text(content, encoding="utf-8")

# Crear ZIP final del sitio completo
final_zip_path = "/mnt/data/GuateInsights_Visualizado_Completo.zip"
with zipfile.ZipFile(final_zip_path, 'w') as zipf:
    for file in complete_site_path.rglob("*"):
        zipf.write(file, arcname=file.relative_to(complete_site_path.parent))

final_zip_path
